- name: Deploy homepage configs
  template:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
    owner: "{{ ansible_user_name }}"
    group: "{{ ansible_user_name }}"
    mode: '0644'
  loop:
      - { src: 'configs/homepage/services.yaml', dest: '{{ base_dir }}/homepage/services.yaml' }
      - { src: 'configs/homepage/settings.yaml', dest: '{{ base_dir }}/homepage/settings.yaml' }
      - { src: 'configs/homepage/widgets.yaml', dest: '{{ base_dir }}/homepage/widgets.yaml' }
      - { src: 'configs/homepage/bookmarks.yaml', dest: '{{ base_dir }}/homepage/bookmarks.yaml' }
      - { src: 'configs/homepage/docker.yaml', dest: '{{ base_dir }}/homepage/docker.yaml' }

- name: Ensure homepage public directory exists
  file:
    path: "{{ base_dir }}/homepage/public/images"
    state: directory
    owner: "{{ ansible_user_name }}"
    group: "{{ ansible_user_name }}"
    mode: '0755'

- name: Deploy background image to homepage public directory
  copy:
    src: 'configs/homepage/public/background.jpg'
    dest: '{{ base_dir }}/homepage/public/images/background.jpg'
    owner: "{{ ansible_user_name }}"
    group: "{{ ansible_user_name }}"
    mode: '0644'
